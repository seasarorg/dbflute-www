<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- don't edit start -->
<head>
<title>Seasar - DI Container with AOP - </title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<link href="seasar_b.css" type="text/css" rel="stylesheet" media="screen" />
<link href="seasar_p.css" type="text/css" rel="stylesheet" media="print" />
<script src="seasar_b.js" type="text/JavaScript" language="JavaScript"></script>
</head>
<body onload="preload('ja')">
<table width="100%" border="0" cellspacing="0" cellpadding="0" align="left"><tr>
<td align="left" valign="top" width="780"><table width="780" border="0" cellspacing="0" cellpadding="0" class="white">
<tr><td colspan="7"><img height="5" width="780" src="images/top01_b.gif" alt=""></td></tr>
<tr><td><img height="117" width="235" src="images/top02_b.gif" alt="Seasar"></td>
<td colspan="3"><img height="117" width="289" src="images/top03.gif" alt="DI Container with AOP"></td>
<td colspan="3"><img height="117" width="256" src="images/spacer.gif" alt=""></td>
</tr><tr><td rowspan="2"><img src="images/top04.gif" alt="" height="49" width="235"></td>
<td><a href="http://www.seasar.org/index.html"><img src="images/menu01_b_ja.gif" height="30" width="78" border="0" alt="" id="menu01" onmouseover="swap(1)" onmouseout="restore(1)"></a></td>
<td><a href="http://www.seasar.org/projects.html"><img src="images/menu02_b_ja.gif" height="30" width="101" border="0" alt="" id="menu02" onmouseover="swap(2)" onmouseout="restore(2)"></a></td>
<td><a href="http://www.seasar.org/products.html"><img src="images/menu03_b_ja.gif" height="30" width="110" border="0" alt="" id="menu03" onmouseover="swap(3)" onmouseout="restore(3)"></a></td>
<td><a href="http://www.seasar.org/resources.html"><img src="images/menu04_b_ja.gif" height="30" width="113" border="0" alt="" id="menu04" onmouseover="swap(4)" onmouseout="restore(4)"></a></td>
<td><img src="images/menu05_b_ja.gif" height="30" width="109" border="0" alt="" id="menu05" onmouseover="swap(5)" onmouseout="restore(5)"></td>
<td><img height="30" width="34" src="images/menu06.gif" alt=""></td></tr><tr>
<td colspan="6"><img height="19" width="545" src="images/spacer.gif" alt=""></td></tr></table>
<table  width="780" border="0" cellspacing="0" cellpadding="0" class="white">
<tr align="left" valign="top"><td width="14"><img height="14" width="14" src="images/spacer.gif" alt=""></td><td width="740" class="main">
<!-- don't edit end -->
<!-- document start -->
<p>
<a href="index.html">to Top</a>
<p><b>
Classificationの設定方法を記述します。
<p></b>
<pre>


// ======================================================================================================
//                                                                                         Classification
//                                                                                         ==============
DBFluteには、区分値などの定数を自動生成する機能があります。
これらはbuild.propertiesの「torque.classificationDefinitionMap」を設定することで作成されます。

// --------------------------------------------------
//                                   <b>区分値の定数定義</b>
//                                   ----------------

codeを定義することによって、以下のようになります。

    A. codeの定数定義が作成されます。
    <b>
    ex) 'y/n'やStatusなどの定数定義 {About A}
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    /** The classification code of Yes. */
    public static final String CODE_YesNo_y = "y";

    /** The classification code of No. */
    public static final String CODE_YesNo_n = "n";

    /** The classification code of WAT. */
    public static final String CODE_CollectionStatus_WAT = "WAT";

    /** The classification code of NOR. */
    public static final String CODE_CollectionStatus_NOR = "NOR";
    - - - - - - - - - -/
    </b>
    ex) build.properties
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    torque.classificationDefinitionMap = map:{ \
        YesNo               =   list:{ \
                                    map:{code=y} \
                                    ; map:{code=n} \
                                } \
        CollectionStatus    =   list:{ \
                                    map:{code=WAT} \
                                    ; map:{code=NOR} \
                                } \
        }
    - - - - - - - - - -/
    ※'name=Xxx'が指定されている場合は、定数名にnameが採用されます。(nameに関しては後述)
      そうでない場合は、定数名にcodeが採用されます。

    ※TODO: [2006/10/16]現在、ENUM対応できていません。
      JDK-1.4をサポートしているため内部構造が複雑になってしまう可能性があり、踏み切っていません。
      将来的にはENUMで生成したいと考えております。


// --------------------------------------------------
//                                   <b>区分値の名称定義</b>
//                                   ----------------

codeに対してnameを付加することによって、以下のようになります。
    A. 定数名にcodeではなく、nameが採用されます。
    B. codeとnameの変換Mapが作成されます。
    <b>
    ex) 'y/n'やStatusなどの定数定義｛about A｝
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    /** The classification code of Yes. */
    public static final String CODE_YesNo_Yes = "y";

    /** The classification code of No. */
    public static final String CODE_YesNo_No = "n";

    /** The classification code of WAT. */
    public static final String CODE_CollectionStatus_WAT = "WAT";

    /** The classification code of NOR. */
    public static final String CODE_CollectionStatus_NOR = "NOR";
    - - - - - - - - - -/
    </b>
    <b>
    ex) 'y/n'の論理名称の変換Map｛about B｝
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    /** The classification code-name map of YesNo. */
    public static final java.util.Map<String, String> CODE_NAME_MAP_YesNo;
    static {
        final java.util.Map<String, String> map = new java.util.LinkedHashMap<String, String>();
  
        map.put(CODE_YesNo_Yes, "Yes");
  
        map.put(CODE_YesNo_No, "No");
  
        CODE_NAME_MAP_YesNo = java.util.Collections.unmodifiableMap(map);
    }
    - - - - - - - - - -/
    </b>
    ex) build.properties
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    torque.classificationDefinitionMap = map:{ \
        YesNo               =   list:{ \
                                    ; map:{code=y;name=Yes} \
                                    ; map:{code=n;name=No} \
                                } \
        CollectionStatus    =   list:{ \
                                    ; map:{code=WAT} \
                                    ; map:{code=NOR} \
                                } \
        }
    - - - - - - - - - -/

    ※特に明示的なLookup-Tableを持たない区分値の名称として利用できます。
    ※CollectionStatusは明示的なLookup-Tableがあり、名称はそちらから取得するべきなので、
      ここではnameは指定していません。(もちろん設計次第なので自由ではありますが...)


// --------------------------------------------------
//                                   <b>区分値の別名定義</b>
//                                   ----------------

codeに対してaliasを付加することによって、以下のようになります。
    A. codeとaliasの変換Mapが作成されます。

nameとaliasの違いは、基本的にnameは'English'でaliasは'Local-Language'(日本語)を設定します。
nameはMethod名の一部として利用される可能性があります。aliasは表示目的のみです。
(Method名の一部に'Local-Language'(日本語)が許容されるなら気にする必要はありませんが...)
    <b>
    ex) Flagとして利用する｛y/n｝の論理表示名称(日本語)｛about A｝
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    /** The classification code-alias map of YesNo. */
    public static final java.util.Map<String, String> CODE_ALIAS_MAP_YesNo;
    static {
        final java.util.Map<String, String> map = new java.util.LinkedHashMap<String, String>();
  
        map.put(CODE_YesNo_Yes, "はい");
  
        map.put(CODE_YesNo_No, "いいえ");
  
        CODE_ALIAS_MAP_YesNo = java.util.Collections.unmodifiableMap(map);
    }
    - - - - - - - - - -/
    </b>
    ex) build.properties
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    torque.classificationDefinitionMap = map:{ \
        YesNo               =   list:{ \
                                    map:{code=y;name=Yes;alias=\u306f\u3044} \
                                    ; map:{code=n;name=No;alias=\u3044\u3044\u3048} \
                                } \
        CollectionStatus    =   list:{ \
                                    map:{code=WAT} \
                                    ; map:{code=NOR} \
                                } \
        }
    - - - - - - - - - -/

    ※build.propertiesにはDouble-Byte文字が利用できないため、Unicodeで設定しています。
    ※多言語対応する場合は、aliasの設定はお奨めしません。


// --------------------------------------------------
//                                 <b>区分値の実Data利用</b>
//                                 ------------------

codeやnameの定義にDatabase上の実Dataを利用することができます。
tableにTable名を指定し、code/name/aliasにそれぞれ該当するColumn名を指定します。
すると、Generate時に指定されたTableとColumnをSelectして、その結果を利用します。

    ex) build.properties
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    torque.classificationDefinitionMap = map:{ \
        YesNo               =   list:{ \
                                    map:{code=y;name=Yes;alias=\u306f\u3044} \
                                    ; map:{code=n;name=No;alias=\u3044\u3044\u3048} \
                                } \
        CollectionStatus    =   list:{ \
                map:{table=COLLECTION_STATUS_LOOKUP;orderBy=COLLECTION_STATUS_NAME desc, COLLECTION_STATUS_CODE asc \
                     ;code=COLLECTION_STATUS_CODE;name=COLLECTION_STATUS_NAME} \
            } \
        }
    - - - - - - - - - -/

    ※参照するDatabaseは、JDBC-TaskにおけるDatabaseと同じものです。
    ※これを指定すると、Generate時にDBに指定されたRecordが登録されていることが前提となります。
    ※この例では、nameにCOLLECTION_STATUS_NAMEを指定していますが、この場合Master-Maintenanceなどにより
      COLLECTION_STATUS_NAMEが更新された場合は、自動生成し直さなければなりません(ズレが生じてしまうため)。
      nameを実Dataから取得する場合は、固定的なデータに対して適用するようにして下さい。
    ※Selectする際の並び順をorderByにて指定できます(“order by xxx”のxxx部分を記述)。※DBFlute-0.4.7より

// --------------------------------------------------
//                                       <b>区分値の配置</b>
//                                       ------------

ある区分値が、どのEntityのどのPropertyに関連付けられるものなのかを設定できます。
これらはbuild.propertiesの「torque.classificationDeploymentMap」を設定することで作成されます。
関連付けると以下のようになります。

    A. 関連付けられたEntityのPropertyに区分値の設定Methodが作成されます。
    B. 関連付けられたEntityのPropertyに区分値の判定Methodが作成されます。
    C. 関連付けられたConditionBeanのPropertyに区分値の条件付加Methodが作成されます。
    <b>
    ex) BOOKのOUT_OF_USER_SELECT_YNにYesNo区分値を関連付けした場合のEntity｛about A｝
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // =====================================================================================
    //                                                                       Classify Method
    //                                                                       ===============
    /**
     * Classify the value of outOfUserSelectYn as Yes.
     */
    public void classifyOutOfUserSelectYnYes() ...

    /**
     * Classify the value of outOfUserSelectYn as No.
     */
    public void classifyOutOfUserSelectYnNo() ...
    - - - - - - - - - -/
    </b>
    <b>
    ex) BOOKのOUT_OF_USER_SELECT_YNにYesNo区分値を関連付けした場合のEntity｛about B｝
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // =====================================================================================
    //                                                          Classification Determination
    //                                                          ============================
    /**
     * Is the value of outOfUserSelectYn 'Yes'?
     * The difference of capital letters and small letters is NOT distinguished.
     * If the value is null, this method returns false!
     * 
     * @return Determanation.
     */
    public boolean isOutOfUserSelectYnYes() ...

    /**
     * Is the value of outOfUserSelectYn 'Yes'?
     * The difference of capital letters and small letters is NOT distinguished.
     * If the value is null, this method throws exception!
     * 
     * @return Determanation.
     */
    public boolean isOutOfUserSelectYnYesIfNullException() ...
                
    /**
     * Is the value of outOfUserSelectYn 'No'?
     * The difference of capital letters and small letters is NOT distinguished.
     * If the value is null, this method returns false!
     * 
     * @return Determanation.
     */
    public boolean isOutOfUserSelectYnNo() ...
    - - - - - - - - - -/
    </b>
    <b>
    ex) BOOKのOUT_OF_USER_SELECT_YNにYesNo区分値を関連付けした場合のConditionBean｛about B｝
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    /**
     * Set the value of Yes of outOfUserSelectYn as equal. { = }
     * 
     * @return this. (NotNull)
     */
    public LdBookCQ setOutOfUserSelectYn_Equal_Yes() ...

    /**
     * Set the value of Yes of outOfUserSelectYn as equal as inline. { = }
     * 
     * @return this. (NotNull)
     */
    public LdBookCQ setOutOfUserSelectYn_Equal_Yes_AsInline() ...

    /**
     * Set the value of No of outOfUserSelectYn as equal. { = }
     * 
     * @return this. (NotNull)
     */
    public LdBookCQ setOutOfUserSelectYn_Equal_No() ...

    /**
     * Set the value of No of outOfUserSelectYn as equal as inline. { = }
     * 
     * @return this. (NotNull)
     */
    public LdBookCQ setOutOfUserSelectYn_Equal_No_AsInline() ...
    - - - - - - - - - -/
    </b>
    ex) build.properties
    /- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    torque.classificationDefinitionMap = map:{ \
        ; YesNo               =   list:{ \
                                    map:{code=y;name=Yes;alias=\u306f\u3044} \
                                    ; map:{code=n;name=No;alias=\u3044\u3044\u3048} \
                                } \
        ; CollectionStatus    =   list:{ \
                map:{table=COLLECTION_STATUS_LOOKUP \
                     ;code=COLLECTION_STATUS_CODE;name=COLLECTION_STATUS_NAME} \
            } \
        }
    torque.classificationDeploymentMap = map:{ \
        ; $$ALL$$                   =   map:{suffix:_YN=YesNo} \
        ; COLLECTION_STATUS         =   map:{COLLECTION_STATUS_CODE=CollectionStatus} \
        ; COLLECTION_STATUS_LOOKUP  =   map:{COLLECTION_STATUS_CODE=CollectionStatus} \
    }
    - - - - - - - - - -/

    ※Table名として $$ALL$$ と指定した場合、全てのTableを走査して指定されたColumnが存在する場合のみ
      そのColumnに区分値を関連付けます。共通列で区分値がある場合はこれが便利です。
    ※「_YN で終わるColumnすべてに関連付ける」というような前方一致or後方一致は、
      {prefix: / suffix:}を利用することで可能です。


</pre>
</p>

<!-- document end -->
</html>
