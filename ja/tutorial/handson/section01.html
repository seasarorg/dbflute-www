<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja" >
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta name="keywords" content="DBFlute,チュートリアル,ハンズオン,hands-on" />
	<link rel="stylesheet" type="text/css" href="../../../css/sub.css" />
	<!--[if IE 6.0]>
		<link rel="stylesheet" type="text/css" href="../../../css/cb/sub.css" />
	<![endif]--> 
	<title>ハンズオンセクション 1 | DBFlute</title>
</head>
<body>
<div id="container" class="ct-tutorial">

<div id="mainbar">
<div id="header">
	<div class="navi-upper"><a href="../../../ja/sitemap.html">SiteMap</a>|<a href="http://d.hatena.ne.jp/jflute/">Author's Blog</a></div>
	<div class="navi-main">
	<ul>
		<li class="hd-introduction"><a href="../../../ja/introduction/index.html"><img src="../../../image/parts/navi/link-intro.png" alt="Introduction" width="75" height="32" /></a></li>
		<li class="hd-tutorial"><a href="../../../ja/tutorial/index.html"><img src="../../../image/parts/navi/link-tuto.png" alt="Tutorial" width="56" height="24" /></a>
			<ul>
				<li class="hd-architect"><a href="../../../ja/tutorial/architect.html"><img src="../../../image/parts/navi/link-arch.png" alt="for Architect" width="80" height="24" /></a></li>
				<li class="hd-developer"><a href="../../../ja/tutorial/developer.html"><img src="../../../image/parts/navi/link-dev.png" alt="for Developer" width="87" height="24" /></a></li>
			</ul>
		</li>
		<li class="hd-environment"><a href="../../../ja/environment/index.html"><img src="../../../image/parts/navi/link-env.png" alt="Environment" width="84" height="25" /></a>
			<ul>
				<li class="hd-install"><a href="../../../ja/environment/setup/index.html"><img src="../../../image/parts/navi/link-setup.png" alt="Setup" width="42" height="24" /></a></li>
				<li class="hd-upgrade"><a href="../../../ja/environment/upgrade/index.html"><img src="../../../image/parts/navi/link-upgrade.png" alt="Upgrade" width="61" height="25" /></a></li>
			</ul>
		</li>
		<li class="hd-manual"><a href="../../../ja/manual/index.html"><img src="../../../image/parts/navi/link-manual.png" alt="Manual" width="62" height="25" /></a></li>
	</ul>
	</div>
</div>

<div id="content">
	<h1>ハンズオンセクション 1</h1>
	<ul class="indexlist">
		<li><a href="#overview">概要</a></li>
		<li><a href="#firstenv">前提環境</a>
			<ul>
				<li><a href="#jdk">JDKのインストール</a></li>
				<li><a href="#maven">Mavenのインストール</a></li>
				<li><a href="#eclipse">Eclipseの準備</a></li>
			</ul>
		</li>
		<li><a href="#prepare">環境準備</a>
			<ul>
				<li><a href="#workspace">ワークスペースの作成</a></li>
				<li><a href="#checkout">プロジェクトのチェックアウト</a></li>
				<li><a href="#gitmaster">もし、社内でひな形が用意されてる場合は...</a></li>
				<li><a href="#mysql">MySQLのセットアップ</a></li>
				<li><a href="#plugin">プラグインのセットアップ</a></li>
			</ul>
		</li>
		<li><a href="#project">プロジェクトのセットアップ</a>
			<ul>
				<li><a href="#eclipse">Eclipseプロジェクトの作成</a></li>
				<li><a href="#encoding">エンコーディングの調整 <span class="freecomment">#workspace #project</span></a></li>
				<li><a href="#linecolor">行番号の表示、背景色の設定 <span class="freecomment">#workspace</span></a></li>
				<li><a href="#typefilters">Type Filters を設定 <span class="freecomment">#workspace</span></a></li>
				<li><a href="#mavensources">Maven の Download Artifact Sources を <span class="freecomment">#workspace</span></a></li>
				<li><a href="#hierarchical">Package Presentation を Hierarchical に <span class="freecomment">#workspace</span></a></li>
				<li><a href="#templates">エディターテンプレートを設定 <span class="freecomment">#workspace</span></a></li>
				<li><a href="#miscsettings">その他いろいろとワークスペース設定 <span class="freecomment">#workspace</span></a></li>
				<li><a href="#formatter">フォーマッタのインポート <span class="freecomment">#project</span></a></li>
				<li><a href="#saveaction">フォーマッタ・インポート調整の自動化 <span class="freecomment">#project</span></a></li>
				<li><a href="#srcfolder">ソースフォルダの順序調整 <span class="freecomment">#omake #workspace</span></a></li>
			</ul>
		</li>
		<li><a href="#dfsetup">DBFluteのセットアップ</a>
			<ul>
				<li><a href="#dfclient6">DBFluteクライアントの作成 <span class="freecomment">※Java6, 7</span></a></li>
				<li><a href="#dfclient8">DBFluteクライアントの作成 <span class="freecomment">※Java8</span></a></li>
				<li><a href="#replaceschema">ReplaceSchemaの実行</a></li>
				<li><a href="#jdbc">JDBCタスクの実行</a></li>
				<li><a href="#doc">Docタスクの実行</a></li>
				<li><a href="#generate">Generateタスクの実行</a></li>
			</ul>
		</li>
		<li><a href="#java8">Java8 なら 1.1 系を使いましょう！</a>
			<ul>
				<li><a href="#v11x">さっそくアップグレードしてみましょう</a></li>
				<li><a href="#onjava8">まずは、Java8 のページ読んでおきましょう</a></li>
				<li><a href="#devtu">ディベロッパーのためのチュートリアル</a></li>
			</ul>
		</li>
		<li><a href="#nextsection">次のセクション</a></li>
	</ul>

	<h2 id="overview">概要</h2>
	<p>
		まずは環境構築、そして、"DBFluteのセットアップから自動生成まで" を体験してみましょう。
	</p>

	<h2 id="firstenv">前提環境</h2>
	<h3 id="jdk">JDKのインストール</h3>
	<p>
		(Java8以上の) JDKがインストールされていること。
	</p>
	<p>
		<span class="freecomment">※インストール先は任意ですが、特にこだわりなければ C:\java\jdk8 などに</span>
	</p>
	<h3 id="maven">Mavenのインストール</h3>
	<p>
		Maven がインストールされていること。(コマンドラインで mvn コマンドが利用できること)
	</p>
	<p>
		<span class="freecomment">※インストール先は任意ですが、特にこだわりなければ C:\java\maven などに</span>
	</p>
	<h3 id="eclipse">Eclipseの準備</h3>
	<p>
		Eclipse-4.4 以上が利用できること。
	</p>
	<p>
		<span class="freecomment">※幾つかの Eclipse プラグインをインストールするため、ハンズオン専用の Eclipse を用意することが推奨</span>
	</p>

	<h2 id="prepare">環境準備</h2>
	<h3 id="workspace">ワークスペースの作成</h3>
	<p>
		新規でハンズオン専用のワークスペースを任意の場所に作成してください。
	</p>
<pre><span class="codetitle">e.g. DBFluteハンズオン用のワークスペース @Directory</span><code>
<span class="comment">// Windowsなら</span>
C:\projects
    |-dbflute
       |-eclipse-dbflute
       |-workspace  <span class="comment">// 例えばここ (場所は任意)</span>

<span class="comment">// MacOSXなら</span>
~/works
    |-dbflute
       |-eclipse-dbflute
       |-workspace  <span class="comment">// 例えばここ (場所は任意)</span>
</code></pre>
	<p>
		あらかじめディレクトリを作成し、Eclipse を起動してそのディレクトリ (workspace)
		を選んでください。起動直後に既に別の workspace が開いてしまう場合は、メニューの
		"File" - "Switch Workspace" からワークスペースを切り替えてください。
		<span class="freecomment">(workspaceの設定もハンズオン内で変更するので、独立した workspace が推奨されます)</span>
	</p>
	<p>
		この時点ではプロジェクトは一つもなく空っぽのワークスペースとなっています。
	</p>
	<p>
		<span class="freecomment">※Eclipseのworkspaceで利用するJavaは、JREではなくJDK。Preferences の Installed JREs で調整できます。</span>
	</p>
	<h3 id="checkout">プロジェクトのチェックアウト</h3>
	<dl class="valuemainlist">
		<dt>GITリポジトリURL</dt>
		<dd>https://jflute@git.codebreak.com/jflute/hands-on.git</dd>
		<dt>プロジェクト</dt>
		<dd>dbflute-hands-on</dd>
	</dl>
	<p>
		<em class="keyword">※社内でひな形が用意されている場合は、そちらを利用してください。</em>
	</p>
	<p>
		EGit (GitクライアントのEclipseプラグイン) を使う場合は、以下のような手順になります。
	</p>
	<ol>
		<li>Preferences の Team - Git - Configuration にて autocrlf が "もし" true になら false に</li>
		<li><em class="keyword">Gitリポジトリエクスプローラー</em>にてリポジトリのクローン (ユーザー・パスワードなし)</li>
		<li><em class="keyword">Working Directory</em> の <em class="keyword">dbflute-hands-on</em> を選択して右クリック <em class="keyword">Import Projects...</em></li>
		<li><em class="keyword">Import as general project</em> を選択して Next, そして次も Finish でおしまい</li>
	</ol>
	<p>
		<span class="freecomment">(<em class="keyword">dbflute-hands-on</em> を選択して右クリック、ってのが大事...あとその後、<em class="keyword">general project</em> ってのがポイント)</span>
	</p>
	<div class="inucolumn">
		<h3 id="gitmaster">もし、社内でひな形が用意されてる場合は...</h3>
		<p>
			すでに社内でひな形が用意されてる場合は、そちらを clone してください。
		</p>
		<p>
			チームでハンズオンを行っていく場合は、社内のGitに hands-on
			なるリポジトリを用意して、master
			ブランチにプロジェクトのひな形をコミットしておいて、各人masterをもとにそれぞれのブランチを作ってハンズオンを進めていくという形がオススメです。
		</p>
		<p>
			したら、コミットも自由にできてバックアップになりますし、フォローワーがレビューもしやすくなります。
			各人が、別のPCでハンズオンの続きをやるってこともやりやすくなります。
		</p>
		<p>
			実際に jflute は、コミットされたハンズオンのコードをレビューして、
			todo形式でレビューコメントを入れてコミットして、実装者に修正してもらってまたこっちで確認して、というような運用でハンズオンを通してプログラミングのフォローを行っています。
		</p>
	</div>
	<h3 id="mysql">MySQLのセットアップ</h3>
	<p>
		ハンズオンでは、3306ポートのMySQLではなく、専用のMySQLインスタンスを起動して利用します。
	</p>
	<p>
		MySQLのオフィシャルサイトからローカル環境に対応する MySQL のインストーラー無し版(ZIPアーカイブ版など)をダウンロードし、localdb/mysql に配置します。
		そして、localdb/boot-mysql.bat|sh を実行し、MySQL を起動してください。
	</p>
	<div class="detailpage"><a href="http://dev.mysql.com/downloads/mysql/">Official Site - MySQL Download</a></div>
<pre><span class="codetitle">e.g. MySQLの配置場所 @Directory</span><code>
PROJECT_ROOT
 |-<span class="abbreviation">...</span>
 |-localdb
 |  |-<span class="point">mysql</span>
 |     |-bin
 |     |-data
 |     |-docs
 |     |-<span class="abbreviation">...</span>
 |-script
 |-tutorial
</code></pre>
	<p>
		さらに、login-mysql-root.bat|sh を実行し、MySQLのコマンドコンソールにて "show databases;" と打って enter
		して、作成されているデータベースは特にないこと(デフォルトのデータベースだけが存在)を確認してください。 
	</p>
	<p>
		今後、ハンズオンを中断する場合は、localdb/close-mysql.bat|sh
		を実行し、MySQLをシャットダウンし、そして、またハンズオンを再開するときは、boot-mysql.bat|sh を実行してください。
	</p>
	<p>
		ちなみに Mac の人は、ダウンロードした後に mysql_install_db
		を実行する必要があるかもしれません。<span class="freecomment">(起動に失敗したら、その可能性があります。エラーメッセージでググってみたりしてみましょう)</span>
	</p>
	<h3 id="plugin">プラグインのセットアップ</h3>
	<p>
		以下のプラグインをそれぞれインストールしてください。
		<span class="freecomment">(既に入っているのであれば、スキップしてしまってOKです)</span>
	</p>
	<dl class="textlist">
		<dt>EMecha</dt>
		<dd>
			DBFluteライフを支援するプラグイン
		</dd>
		<dd>
			<a href="https://github.com/dbflute-emecha/dbflute-emecha-eclipse/releases">https://github.com/dbflute-emecha/dbflute-emecha-eclipse/releases</a>
		</dd>
		<dd>
			DBFlute-EMecha.zip を解凍し、Eclipse の dropinsディレクトリ配下に配置。 
		</dd>
		<dd>
			<div class="relatedpage"><a href="../../manual/function/helper/emecha/index.html">EMechaプラグイン</a></div>
		</dd>
		<dt>Quick JUnit</dt>
		<dd>JUnitを使う際のちょっとした便利プラグイン</dd>
		<dd>更新サイトURL: <em class="keyword">http://quick-junit.sourceforge.jp/updates/current</em></dd>
		<dd>Help - Install New Software から更新サイトURLを指定してインストール。</dd>
	</dl>

	<h2 id="project">プロジェクトのセットアップ</h2>
	<h3 id="eclipse">Eclipseプロジェクトの作成</h3>
	<p>
		tutorial/material/eclipse/prototype-pom.xml をプロジェクト直下に pom.xml
		という名前でコピーしましょう。ちなみに、pom.xml やその他幾つかのリソースは SVN-Ignore 設定となっています。
		<span class="freecomment">(講師による Maven のお話あり)</span>
	</p>
	<p>
		script 配下の maven-eclipse.bat|sh を実行し、コンソールのログを見て正常終了が確認できたらリフレッシュ(F5)し、その後 Eclipse
		を再起動してしてください。ただし、M2_REPO が既に登録されている環境ではリフレッシュするだけでOKです。すると、そのプロジェクトが
		Maven 管理された Java プロジェクトになり、既に存在している UnitContainerTestCase がコンパイルされます。
		(ただし、この時点ではコンパイルエラーになっているはずです)
	</p>
	<h3 id="encoding">エンコーディングの調整 <span class="freecomment">#workspace #project</span></h3>
	<p>
		プロジェクトのエンコーディングを UTF-8 にしてください。プロジェクトを選択して、"alt + enter"
		すると、プロジェクトの設定画面が開きますので、Resource の "Text file encoding" で UTF-8
		を指定。また、改行コードをLFに統一したいので、"line delimiter" で Unix を指定。
	</p>
	<p>
		また、参照ライブラリのJavaDocコメントなどが UTF-8 であることが多いため、ワークスペースのエンコーディングも
		UTF-8 にします。メニューの Window - Preferences の <em class="keyword">General - Workspace</em>
		にて同じ要領で設定できます。(Mac なら メニューの Eclipse - 環境設定...)
	</p>
	<p>
		Windows なら流れるように <em class="keyword">alt -&gt; W -&gt; P</em> を押せば、Macなら <em class="keyword">command + , (カンマ)</em>
		を押せば Preferences を開けます。<span class="freecomment">(この後、何度も開きますので...)</span>
	</p>
	<h3 id="linecolor">行番号の表示、背景色の設定 <span class="freecomment">#workspace</span></h3>
	<p>
		メニューの Window - Preferences の <em class="keyword">General - Editors - Text Editors</em> を選択。
		ここでは、テキストエディターに関する様々な調整ができます。
	</p>
	<p>
		行番号は必ず表示しておきましょう。スタックトレースやログなどからソースコードを追うために行番号は頻繁に利用します。"Show line numbers"
		にチェックを入れます。また、Background color で好きな背景色を設定するととても落ち着くでしょう。
	</p>
	<h3 id="typefilters">Type Filters を設定 <span class="freecomment">#workspace</span></h3>
	<p>
		メニューの Window - Preferences の <em class="keyword">Java - Appearance - Type Filters</em> を選択。ここでは、クラス型の補完で "表示させたくない"
		パッケージやクラスを定義することができます。
	</p>
	<p>
		例えば java.util.List は、毎度毎度 "java.awt.Listとどっちを選ぶ？"
		と聞かれてしまいます。Type Filters にて "java.awt.*" と設定すれば、そんなことはもう聞かれません。
		もう、絶対に使わないのにも関わらず、わりとよく出てくる紛らわしいものを設定しておくと良いでしょう。 
	</p>
	<dl class="keymainlist">
		<dt>java.awt.*</dt><dd>awtパッケージを使うことは今の開発ではまずない</dd>
		<dt>com.sun.*</dt><dd>sunパッケージのクラスを使うことはほとんどない</dd>
		<dt>sun.*</dt><dd>sunパッケージが意外と紛らわしい!?</dd>
		<dt>java.sql.Date</dt><dd>業務のプログラムでjava.sql.Dateを使うことはまずない</dd>
	</dl>
	<p>
		また、ハンズオンでは MySQL を利用しますが、MySQLのJDBCドライバのLogクラスが、commons-logging
		のLogクラス補完時に紛れるので、com.mysql.jdbc.log.* も除外しておくと良いでしょう。
	</p>
	<dl class="keymainlist">
		<dt>com.mysql.jdbc.log.*</dt><dd>MySQLのJDBCドライバのLogクラスを使うことはまずない</dd>
	</dl>
	<p>
		さらにアドリブで、こちらも外しちゃってもいいかと思います。
	</p>
	<dl class="keymainlist">
		<dt>java.lang.StringBuffer</dt><dd>文字列連結を同期化する必要性はほぼない、StringBuilder でOK</dd>
		<dt>java.util.Calendar</dt><dd>少なくともハンズオンでは HandyDate を使ってください</dd>
	</dl>
	<p>
		キリがないのでこの辺にしておきますが、つどつど気付いたときに登録していくと良いでしょう。
	</p>
	<h3 id="mavensources">Maven の Download Artifact Sources を <span class="freecomment">#workspace</span></h3>
	<p>
		Maven で管理されたライブラリのソースコードは、デフォルトではダウンロードされず関連付けもない状態である可能性があります。
		すると、ソースコードが見られないだけでなく、パラメーターの補完などで変数名が arg0 とかになってしまうことがあります。
	</p>
	<p>
		もし、ctrl + shift + T (Open Type) で HandyDate クラスを開いて、ソースが表示されないか、ソースが表示されても JavaDoc
		が表示されていなければ、ソースコードがダウンロードされていません。
	</p>
	<p>
		メニューの Window - Preferences の Maven にて、Download Artifact Sources のチェックが外れていたらチェックを付けます。
		そして、maven-eclipse.bat(sh) をもう一度叩いて、プロジェクトをF5してみましょう。
		<span class="freecomment">(M2Eであれば、プロジェクトを右クリックして Maven の Download Sources となる)</span>
	</p>
	<h3 id="hierarchical">Package Presentation を Hierarchical に <span class="freecomment">#workspace</span></h3>
	<p>
		これは好みによるので任意ですが、特にFlat形式にこだわりがなければやってみましょう。
	</p>
	<p>
		Eclipse のデフォルトは、Package Presentation が Flat
		で、パッケージがたくさんあるプロジェクトだと、ずらーっと並んで見づらいと感じることがあります。
		特にDBFluteで自動生成されるクラスは、パッケージをたくさん持っているので Hierarchical の方が扱いやすくなります。
	</p>
	<p>
		Hierarchical に変更する場合は、(Java パースペクティブの)パッケージエクスプローラの右上の下矢印っぽいマークの部分 (View Menu)
		から、Package Presentation の Hierarchical を選択します。
	</p>
	<p>
		この時点では、"わからない人はまだよくわからない" と思われるので、この後DBFluteのクラスを自動生成した後に試してみると良いでしょう。
	</p>
	<div class="relatedpage"><a href="#generate">this - Generateタスクの実行</a></div>
	<h3 id="templates">エディターテンプレートを設定 <span class="freecomment">#workspace</span></h3>
	<p>
		メニューの Window - Preferences の <em class="keyword">Java - Editor - Templates</em> を選択。
		ここでは、コード補完のテンプレートを独自に定義することができます。
	</p>
	<p>
		まず、既存のテンプレートをすべて選択して、Remove してください<span class="freecomment">(これをやらないと二重に登録される可能性あり)</span>。
		そして、"Import..." にて tutorial/material/eclipse/java-editor-templates.xml を取り込んでください。
		あとでちょっとだけ良いことがあります。<span class="freecomment">(まあ、セクション２にて)</span>
	</p>
	<h3 id="miscsettings">その他いろいろとワークスペース設定 <span class="freecomment">#workspace</span></h3>
	<p>
		好みもありますが、その他やっておくと良いだろうという設定を記しておきます。
	</p>
	<dl class="textlist">
		<dt>ドット "." 始まりのファイルが見えるように</dt>
		<dd>
			デフォルトではドット "." で始まるファイルは見えないようになっているので、パッケージエクスプローラのフィルタの設定で一時的に見えるようにします。
			(Java パースペクティブの)パッケージエクスプローラの右上の下矢印っぽいマークの部分 (View Menu) から Filters
			を選択すると、フィルタ対象の設定が調整できます。".* resource" のチェックを外すと "." で始まるファイルが見るようになります。
		</dd>
		<dt>ctrl + H のカスタマイズ</dt>
		<dd>
			File Search だけにする。ほぼ File Search しか使わないのに、Java Search がデフォルトになるため。
		</dd>
		<dd>
			プロジェクトを選択して、ctrl+Hを押すと、検索ダイアログが表示されます。左下の "Customize..." で File Search だけチェック。
		</dd>
		<dt>ctrl + F のカスタマイズ</dt>
		<dd>
			インクリメンタルサーチを有効に。便利なので。<span class="freecomment">(普段、ctrl+Jを使っている人はあまり気にしないかもですが)</span>
		</dd>
		<dd>
			何かしらテキストファイルを開いて、ctrl+Fを押すと検索ダイアログが表示されます。
			そこで Incremental にチェックを付ける。(その後、キャンセルしても、記憶されます)
		</dd>
		<dt>ツールバーの整理</dt>
		<dd>
			ツールバーの不要な要素を除去。多いと二行になってコード領域が狭くなるため。ツールバーで右クリック "Customize Perspective..."
			の Tool Bar Visibility にて、Launch と Resource Synchronizer 以外はチェックを外す(but ここは好みで)。
		</dd>
		<dt>コンソールのバッファサイズ</dt>
		<dd>
			大きな処理だとログがあっという間に最初の方のログが切れてしまうので、Window - Show View - Console
			で表示されたコンソール上で右クリックして Preferences... で、"Console buffer size" を 800000 (八十万) に。
			コンソールはそのままバッテンを押して消してOK(テスト実行に自動的に表示されるので)。 
		</dd>
		<dd>
			ただ、こちらの設定、コンソールに何も表示されていないと右クリックしても Preferences
			が出てきません。何かしらの方法でコンソールに文字が表示できれば設定できますが、特に急ぐものではないので、セクション２でテストを実行したときにコンソールが出てくるので、(忘れずに)そのときにやりましょう。
		</dd>
		<dt>ビューの配置</dt>
		<dd>
			利用しているPCの画面の大きさに合わせて、いい感じに調整。Problems を Fast View (Minimize)
			にしたりなど。通常は横長で縦が短いディスプレイが多いので、コードができるだけ縦に見通せるようにするといいでしょう。
		</dd>
		<dt>ショートカットキーの設定</dt>
		<dd>
			EGitを使っている場合は、あらかじめ設定しとくと楽。
			<div class="detailpage"><a href="http://d.hatena.ne.jp/jflute/20130125/egitsive">EGitでSubversiveっぽく</a></div>
		</dd>
		<dd>
			また、"Rerun JUnit Test" を ctrl + R (好み) とかに設定しておくと良い。
			<span class="freecomment">(Quick JUnit の F11 が別のキーに奪われている可能性があるため)</span>
		</dd>
	</dl>
	<h3 id="formatter">フォーマッタのインポート <span class="freecomment">#project</span></h3>
	<p>
		Eclipseには、コードをフォーマットする機能があります。
	</p>
	<p>
		ただ、Eclipseのデフォルトのフォーマット定義は <em class="keyword">かなり</em> 使いづらいため、プロジェクトのプロパティの "Java Code Style" の Formatter
		にて、"Enable project specific settings" にチェックを入れ、import にて tutorial/material/eclipse/formatter-profile.xml
		を指定して適用してください。
	</p>
	<p>
		このフォーマット定義は、横幅を 140 に、コメント内のフォーマットを OFF にしています。 
	</p>
	<h3 id="saveaction">フォーマッタ・インポート調整の自動化 <span class="freecomment">#project</span></h3>
	<p>
		フォーマッタ設定やショートカットを実践したばかりでなんですが、保管時(保存: ctrl +
		S)に自動でフォーマッタが動くように設定することができます。わざわざショートカットを打つ必要もありません。
	</p>
	<p>
		プロジェクトのプロパティの "Java Editor" の "Save Actions"
		にて、"Enable project specific settings" にチェックを入れ、さらに "Perform the selected actions on
		save"、および、"Format source code"
		にチェックを入れましょう。
	</p>
	<p>
		さらに "Organize imports" にもチェックを入れましょう。これは import
		文を整理してくれるアクション(ctrl + shift + O)です。
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/topic/programming/shortcut/codejustcut.html"> -->コード調整ショートカット<!-- </a> --></span></div>
	<h3 id="srcfolder">ソースフォルダの順序調整 <span class="freecomment">#omake #workspace</span></h3>
	<p>
		ソースフォルダの順序がいまいちな場合は、.classpath を修正して順序を調整してください。
		具体的には、src/main/java, src/main/resources, src/test/java, src/test/resource の順に直します。
		<span class="freecomment">(ただ、maven-eclipse.bat|sh を実行する度に戻ってしまいますので、そのときは好きなように)</span>
	</p>
	<p>
		<span class="freecomment">※.classpathファイルがEclipseから見当たらない場合は、先ほどの workspace の設定が終わってない可能性あり</span>
	</p>
<pre><span class="codetitle">e.g. ソースフォルダの順序をいい感じに直す @Java</span><code>
  &lt;classpathentry kind="src" path="src/main/java" including=<span class="abbreviation">...</span>
  &lt;classpathentry kind="src" path="src/main/resources" excluding=<span class="abbreviation">...</span>
  &lt;classpathentry kind="src" path="src/test/java" output=<span class="abbreviation">...</span>
  &lt;classpathentry kind="src" path="src/test/resources" output=-<span class="abbreviation">...</span>
</code></pre>
	<p>
		.classpath の修正では、Eclipse のエディタ上のショートカット "alt + 上矢印", "alt + 下矢印"
		と有効に使うと良いでしょう。現在カーソルのある行が矢印の方向に移動します。
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/topic/programming/shortcut/editorcut.html"> -->エディタショートカット<!-- </a> --></span></div>

	<h2 id="dfsetup">DBFluteのセットアップ</h2>
	<h3 id="dfclient6">DBFluteクライアントの作成 <span class="freecomment">※Java6, 7</span></h3>
	<p>
		EMechaの機能を利用して、DBFluteエンジンをダウンロード、DBFluteクライアントを作成します。
		<span class="freecomment">(講師によるDBFlute環境のお話あり)</span>
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/client/index.html"> -->DBFluteクライアント<!-- </a> --></span></div>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/engine/index.html"> -->DBFluteエンジン (モジュール)<!-- </a> --></span></div>
	<p>
		プロジェクトを右クリックして、"New" - "Other" で "DBFlute Wizards" の "DBFlute New Client"
		を選択してウィザード画面を起動し、以下の内容を入力してください。
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/helper/emecha/newclient/index.html"> -->EMecha - DBFluteクライアントの新規作成<!-- </a> --></span></div>
	<dl class="valuemainlist">
		<dt>Client Project</dt><dd>maihamadb</dd>
		<dt>Database</dt><dd>mysql</dd>
		<dt>DI Container</dt><dd>seasar</dd>
		<dt>Package Base</dt><dd>org.docksidestage.handson.dbflute</dd>
		<dt>Driver</dt><dd>com.mysql.jdbc.Driver</dd>
		<dt>Url</dt><dd>jdbc:mysql://localhost:43376/maihamadb</dd>
		<dt>Schema</dt><dd>※空っぽ</dd>
		<dt>User</dt><dd>maihamadb</dd>
		<dt>Password</dt><dd>maihamadb</dd>
		<dt>DBFlute Version</dt><dd>※"Latest Version" ボタンを押すと値が入る</dd>
	</dl>
	<p>
		そして、"Download DBFlute" ボタンを押し、最新版のDBFluteがダウンロードしてください(若干待ちます)。そして、Finish
		すると、プロジェクト直下に dbflute_example(DBFluteクライアント) と mydbflute(DBFluteエンジン) が配置されています。
		<span class="freecomment">(もし、mydbflute配下にDBFluteのzipファイルが残っていたら削除してOKです。プラグインが削除し切れてないだけです)</span>
	</p>
	<h3 id="dfclient8">DBFluteクライアントの作成 <span class="freecomment">※Java8</span></h3>
	<p>
		DBFlute Maven Plugin を使って、インストールします。
	</p>
	<p>
		まずは、コマンドラインで dbflute:download ゴールを叩きます。<span class="freecomment">(プロジェクト直下にて)</span>
	</p>
<pre><span class="codetitle">e.g. dbflute:download ゴールを叩く！ @Command</span><code>
<span class="abbreviation">...</span>$ <span class="keyword">mvn</span> -e dbflute:download
</code></pre>
	<p>
		その後、コマンドラインで dbflute:create-client ゴールを叩きます。
	</p>
<pre><span class="codetitle">e.g. dbflute:download ゴールを叩く！ @Command</span><code>
<span class="abbreviation">...</span>$ <span class="keyword">mvn</span> -e dbflute:create-client
</code></pre>
	<p>
		basicInfoMap.dfprop のプロパティ値を修正します。
	</p>
	<dl class="valuemainlist">
		<dt>database</dt><dd>mysql</dd>
		<dt>targetContainer</dt><dd>seasar</dd>
	</dl>
	<p>
		databaseInfoMap.dfprop のプロパティ値を修正します。
	</p>
	<dl class="valuemainlist">
		<dt>driver</dt><dd>com.mysql.jdbc.Driver</dd>
		<dt>url</dt><dd>jdbc:mysql://localhost:43376/maihamadb</dd>
		<dt>schema</dt><dd>※空っぽ</dd>
		<dt>user</dt><dd>maihamadb</dd>
		<dt>password</dt><dd>maihamadb</dd>
	</dl>
	<h3 id="replaceschema">ReplaceSchemaの実行</h3>
	<p>
		アプリユーザとスキーマ(テーブル構造を含む)を作成するために、ReplaceSchemaを利用します。
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/task/replaceschema/index.html"> -->ReplaceSchema<!-- </a> --></span></div>
	<h4>DBユーザ自動作成のための設定</h4>
	<p>
		DBFluteクライアント/dfprop配下の replaceSchemaDefinitionMap.dfprop
		の additionalUserMap プロパティを以下のように設定してください<span class="freecomment">(コメントアウトされた雛形があるので、そのコメントアウトを外して修正)</span>。
		これは、システムユーザによるアプリユーザ、スキーマの作成を自動化するための準備です。
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/task/replaceschema/systemuser.html"> -->システムユーザによる実行<!-- </a> --></span></div>
<pre><span class="codetitle">e.g. additionalUserMap の設定 @replaceSchemaDefinitionMap.dfprop</span><code>
    <span class="abbreviation">...</span>

    ; additionalUserMap = <span class="keyword">map:</span>{
        ; system = <span class="keyword">map:</span>{
            ; url = jdbc:mysql://localhost:43376
            ; user = root
            ; password = df:dfprop/system-password.txt|
        }
    }

    <span class="abbreviation">...</span>
</code></pre>
	<p>
		password に "df:dfprop/system-password.txt" と "|" を加えることで、
		rootのパスワードは以下のようなルールで決定されます。
	</p>
	<dl class="keymainlist">
		<dt>パスワードファイルがあれば</dt><dd>パスワードファイルの中のパスワードが有効</dd>
		<dt>パスワードファイルがなければ</dt><dd>「|」より右側の文字列がパスワード (この場合は「空パスワード」)</dd>
	</dl>
	<p>
		ダウンロードしたての MySQL は、パスワードが空であることが想定され、ここでは特にパスワードファイルを作成する必要はないはずですが、
		もし違う場合は、パスワードファイルを作成してください。
	</p>
	<h4>DBユーザ、テーブル作成DDLの配置</h4>
	<p>
		tutorial/material/dbflute/playsql-createschema-ddl-1st.zip の playsql/replace-schema-00-system.sql と
		replace-schema-10-basic.sql、この二つのファイルをDBFluteクライアントの playsql 配下に配置してください。
		<span class="freecomment">(デフォルトで配置されている空っぽのreplace-schema.sqlは削除しちゃってOKです)</span>
	</p>
<pre><span class="codetitle">e.g. CreateSchema用のDDLの配置場所 @Directory</span><code>
PROJECT_ROOT
 |-<span class="abbreviation">...</span>
 |-dbflute_exampledb
 |  |-dfprop
 |  |-<span class="abbreviation">...</span>
 |  |-playsql
 |  |  |-<span class="point">replace-schema-00-system.sql</span>
 |  |  |-<span class="point">replace-schema-10-basic.sql</span>
 <span class="abbreviation">...</span>
</code></pre>
	<p>
		これにて、システムユーザの権限を利用してアプリユーザと ExampleDB のテーブル作成の準備が整いました。
		<span class="freecomment">(後の演習のために、この時点では明らかにおかしいカラム名などERDと若干の違いがあります)</span>
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/reference/example/maihamadb.html"> -->MaihamaDB<!-- </a> --></span></div>
	<h4>ReplaceSchemaを叩く！</h4>
	<p>
		DBFluteタスクである、ReplaceSchemaタスクを実行してください。
	</p>
	<p>
		Windows であれば、リソースの検索 <em class="keyword">(ctrl + shift + R)</em> で
		"manage.bat" を検索してそのまま実行、メニューが出ますので 0 番 (replace-schema) を押して Enter すればOKです。
		<span class="freecomment">(Macの人はターミナルから manage.sh を...)</span>
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/task/index.html"> -->DBFluteタスク<!-- </a> --></span></div>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/task/replaceschema/index.html"> -->ReplaceSchemaタスク<!-- </a> --></span></div>
	<p>
		コンソールのログを見て、正常終了していることを確認してください。
		DBFluteタスクのログファイルである、DBFluteクライアント/log/dbflute.log でも確認することができます。
	</p>
	<p>
		再度、MySQLにログインし、exampledb データベースが作られていることを確認してください。
	</p>
	<h3 id="jdbc">JDBCタスクの実行</h3>
	<p>
		まず、DBFluteクライアントの schema 配下には、readme しかないことを確認してください。
	</p>
	<p>
		DBFluteタスクである、JDBCタスク (manage.bat|sh で21番) を実行してください。実行の仕方は、ReplaceSchemaを実行したときと同じ要領で、
		リソースの検索から実行すると良いでしょう。今後、DBFluteタスクの実行をする時はこの方法を使っていきましょう。
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/task/index.html"> -->DBFluteタスク<!-- </a> --></span></div>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/task/jdbc/index.html"> -->JDBCタスク<!-- </a> --></span></div>
	<p>
		DBFluteクライアントの schema 配下に、テーブル構造の情報(スキーマのメタデータ)が XML 形式で出力されているはずです(Eclipse上でリフレッシュ必要)。
	</p>
	<h3 id="doc">Docタスクの実行</h3>
	<p>
		まず、DBFluteクライアントの output/doc 配下には、readme しかないことを確認してください。
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/task/doc/index.html"> -->Docタスク<!-- </a> --></span></div>
	<p>
		Docタスク (manage.bat|sh で22番) を実行してください。DBFluteクライアントの output/doc 配下に、テーブル構造の情報(スキーマのメタデータ)が HTML
		形式で出力されているはずです(Eclipse上でリフレッシュ必要)。
	</p>
	<h3 id="generate">Generateタスクの実行</h3>
	<p>
		まず、src/main/java 配下には、何もクラスがないことを確認してください。
	</p>
	<div class="relatedpage"><span class="working"><!-- <a href="../../../manual/function/generator/task/generate/index.html"> -->Generateタスク<!-- </a> --></span></div>
	<p>
		そして、Generateタスク (manage.bat|sh で23番) を実行してください。src/main/java 配下にテーブル対応のクラスが自動生成されているはずです。
		ResourceSynchronizer が有効であれば自動でリフレッシュされます。コンパイルが正常に通っていることを確認してください。
	</p>
	<p>
		<span class="freecomment">(...コンパイル確認中)</span>
	</p>
	<p>
		自動生成されたクラスがコンパイルエラーになったでしょうか？
	</p>
	<p>
		DBFluteモジュールとDBFluteランタイムのバージョンを確認してみてください。
		自動生成されたクラスとDBFluteランタイムのjarファイルのバージョンは一致していなければなりません。
		食い違っていれば、DBFluteランタイムのバージョンを修正してみましょう。
	</p>
	<p>
		これで本当にコンパイルエラーなくなれば、セクション１はおしまいです！
	</p>
	<p>
		そういえば、Package Presentation がよくわからなかった人は、ここで Hierarchical に変更してみましょう。
		src/main/java配下の表現の仕方がガラリと変わるはずです。
	</p>
	<div class="relatedpage"><a href="#hierarchical">this - Package Presentation を Hierarchical に</a></div>

	<div class="inucolumn">
		<h2 id="java8">Java8 なら 1.1 系を使いましょう！</h2>
		<h3 id="v11x">さっそくアップグレードしてみましょう</h3>
		<p>
			Java8を使う場合は、ぜひ DBFlute の 1.1.x 系でやってみましょう。
		</p>
		<p>
			(2014/11/5) 時点では、DBFlute-1.1-pilotB-SNAPSHOT が出ています。
			突然ですが、アップグレードしてみましょう。
		</p>
		<div class="relatedpage"><a href="http://d.hatena.ne.jp/jflute/20141003/pilot1">外部サイト - jfluteの日記 - DBFlute-1.1パイロットわんSNAPSHOT</a></div>
		<ol>
			<li>EMecha の Upgrade にて、Latest Snapshot ボタン押して Download 押して Finish!</li>
			<li>pom.xml の DBFlute と UTFlute のバージョンを 1.1 系のものにして maven-eclipse.bat(sh)</li>
			<li>manage.bat(sh) で、renewal しましょう！</li>
		</ol>
		<h3 id="onjava8">まずは、Java8 のページ読んでおきましょう</h3>
		<p>
			Java8のページあります！
		</p>
		<div class="detailpage"><a href="http://dbflute.seasar.org/ja/tutorial/onjava8.html">DBFlute on Java8</a></div>
	</div>

	<div class="inucolumn">
		<h3 id="devtu">ディベロッパーのためのチュートリアル</h3>
		<p>
			さあ、ディベロッパーのためのチュートリアルをブックマークしましょう！
		</p>
		<div class="detailpage"><span class="working"><!-- <a href="../../../tutorial/developer.html"> -->ディベロッパーのためのチュートリアル<!-- </a> --></span></div>
		<p>
			今後、何かとこのページを見ることになるかと思います。
			DBFluteのさまざまなページを辿ることができるエントリページになっています。
			まずは一度さらっと読んでみて、"ここにこういうことが書いてあるんだ"
			となんとなく理解してみて、そして、このあと困ったことがあったら、このページを開いて情報を探していくとよいでしょう。
		</p>
		<p>
			ちなみに、Java8のページ (DBFlute on Java8) もこちらから辿れるようになっています。
		</p>
	</div>
	
	<h2 id="nextsection">次のセクション</h2>
	<p>
		さて、次のセクションへ
	</p>
	<div class="detailpage"><a href="./section02.html">ハンズオン セクション 02</a></div>

</div>
</div>

<div id="sidebar">
	<div class="logo"><a href="../../../"><img src="../../../image/parts/logo.png" alt="dbflute-logo" width="240" height="110" /></a></div>
<ul>
		<li><a href="../../../ja/tutorial/architect.html">アーキテクトのチュートリアル</a>
			<ul>
				<li><a href="../../../ja/tutorial/architect.html#knowledge">必要な知識</a></li>
				<li><a href="../../../ja/tutorial/architect.html#action">開発時にやるべきこと</a></li>
			</ul>
		</li>
		<li><a href="../../../ja/tutorial/developer.html">ディベロッパーのチュートリアル</a>
			<ul>
				<li><a href="../../../ja/tutorial/developer.html#about">DBFluteとは？</a></li>
				<li><a href="../../../ja/tutorial/developer.html#style">実装スタイル</a></li>
				<li><a href="../../../ja/tutorial/developer.html#policy">ディベロッパーの十か条</a></li>
				<li class="upper-space"><a href="../../../ja/tutorial/developer.html#faq">ディベロッパーのFAQ</a></li>
				<li><a href="../../../ja/tutorial/developer.html#supplement">補足資料</a></li>
			</ul>
		</li>
		<li><a href="../../../ja/tutorial/handson/index.html">DBFluteハンズオン</a>
			<ul>
				<li><a href="../../../ja/tutorial/handson/training/hands-on01.html">Section 1</a></li>
				<li><a href="../../../ja/tutorial/handson/training/hands-on02.html">Section 2</a></li>
				<li><a href="../../../ja/tutorial/handson/training/hands-on03.html">Section 3</a></li>
				<li class="upper-space"><a href="../../../ja/tutorial/handson/training/hands-on04.html">Section 4</a></li>
				<li><a href="../../../ja/tutorial/handson/training/hands-on05.html">Section 5</a></li>
				<li class="upper-space"><a href="../../../ja/tutorial/handson/training/hands-on06.html">Section 6</a></li>
				<li><a href="../../../ja/tutorial/handson/training/hands-on07.html">Section 7</a></li>
				<li><a href="../../../ja/tutorial/handson/training/hands-on08.html">Section 8</a></li>
				<li class="upper-space"><a href="../../../ja/tutorial/handson/training/hands-on09.html">Section 9</a></li>
				<li><a href="../../../ja/tutorial/handson/training/hands-on10.html">Section 10</a></li>
				<li><a href="../../../ja/tutorial/handson/training/hands-on11.html">Section 11</a></li>
			</ul>
		</li>
	</ul>

</div>

<div id="footer">
	<div><a href="../../../ja/sitemap.html">SiteMap</a> <a href="http://d.hatena.ne.jp/jflute">Author's Blog</a><a href="https://www.seasar.org/issues/browse/DBFLUTE">BTS</a></div>
	<ul class="footer-navi">
		<li class="hd-introduction"><a href="../../../ja/introduction/index.html">Introduction</a></li>
		<li class="hd-tutorial"><a href="../../../ja/tutorial/index.html">Tutorial</a>
			<ul>
				<li class="hd-architect"><a href="../../../ja/tutorial/architect.html">for Architect</a></li>
				<li class="hd-developer"><a href="../../../ja/tutorial/developer.html">for Developer</a></li>
			</ul>
		</li>
		<li class="hd-environment"><a href="../../../ja/environment/index.html">Environment</a>
			<ul>
				<li class="hd-install"><a href="../../../ja/environment/setup/index.html">Setup</a></li>
				<li class="hd-upgrade"><a href="../../../ja/environment/upgrade/index.html">Upgrade</a></li>
			</ul>
		</li>
		<li class="hd-manual"><a href="../../../ja/manual/index.html">Manual</a></li>
	</ul>

</div>

</div>
</body>
</html>
